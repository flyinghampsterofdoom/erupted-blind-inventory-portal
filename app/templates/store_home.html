{% extends 'base.html' %}
{% block content %}
<h1>Store Count Sessions</h1>
<p class="muted">Signed in as {{ principal.username }}</p>

<form method="post" action="/store/sessions/generate">
  <input type="hidden" name="csrf_token" value="{{ csrf_token(request) }}" />
  <label>Employee Name</label>
  <input type="text" name="employee_name" required />
  <div class="actions">
    <button type="submit">Generate Count Sheet</button>
  </div>
</form>

<table>
  <thead>
    <tr>
      <th>Session ID</th>
      <th>Employee</th>
      <th>Status</th>
      <th>Includes RECOUNT</th>
      <th>Created</th>
      <th>Submitted</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for row in sessions %}
    <tr>
      <td>{{ row.id }}</td>
      <td>{{ row.employee_name }}</td>
      <td>{{ row.status }}</td>
      <td>{{ 'Yes' if row.includes_recount else 'No' }}</td>
      <td>{{ row.created_at }}</td>
      <td>{{ row.submitted_at or '-' }}</td>
      <td><a href="/store/sessions/{{ row.id }}">Open</a></td>
    </tr>
    {% else %}
    <tr><td colspan="7">No sessions yet.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
